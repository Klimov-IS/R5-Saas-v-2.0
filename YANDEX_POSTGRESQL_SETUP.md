# Yandex Cloud PostgreSQL Setup | WB Reputation Manager

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 30 –¥–µ–∫–∞–±—Ä—è 2024
**Sprint:** M1
**Task:** TASK-M01

---

## üéØ –¶–µ–ª—å

–°–æ–∑–¥–∞—Ç—å Managed PostgreSQL –∫–ª–∞—Å—Ç–µ—Ä –Ω–∞ Yandex Cloud –¥–ª—è production –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

---

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –í–æ–π—Ç–∏ –≤ Yandex Cloud Console

1. –û—Ç–∫—Ä—ã—Ç—å: https://console.cloud.yandex.ru
2. –í–æ–π—Ç–∏ —Å –≤–∞—à–∏–º –Ø–Ω–¥–µ–∫—Å ID
3. –í—ã–±—Ä–∞—Ç—å –∫–∞—Ç–∞–ª–æ–≥ (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–∞—Ç–∞–ª–æ–≥ `wb-reputation-production`

---

### –®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å PostgreSQL –∫–ª–∞—Å—Ç–µ—Ä

#### 2.1. –ü–µ—Ä–µ–π—Ç–∏ –≤ Managed Service for PostgreSQL

1. –í –º–µ–Ω—é —Å–ª–µ–≤–∞ ‚Üí "Managed Service for PostgreSQL"
2. –ù–∞–∂–∞—Ç—å **"–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä"**

#### 2.2. –ë–∞–∑–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|----------|-------------|
| **–ò–º—è –∫–ª–∞—Å—Ç–µ—Ä–∞** | `wb-reputation-prod-db` | –õ–µ–≥–∫–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å |
| **–û–∫—Ä—É–∂–µ–Ω–∏–µ** | Production | –î–ª—è prod |
| **–í–µ—Ä—Å–∏—è PostgreSQL** | 15 | –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è |

#### 2.3. –ö–ª–∞—Å—Å —Ö–æ—Å—Ç–∞

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ | Production (–±—É–¥—É—â–µ–µ) |
|----------|---------------------|----------------------|
| **–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞** | Intel Ice Lake | Intel Ice Lake |
| **–ö–ª–∞—Å—Å —Ö–æ—Å—Ç–∞** | s2.small | s2.medium |
| **vCPU** | 2 | 4 |
| **RAM** | 8 GB | 16 GB |
| **–¢–∏–ø –¥–∏—Å–∫–∞** | network-ssd | network-ssd |
| **–†–∞–∑–º–µ—Ä –¥–∏—Å–∫–∞** | 50 GB | 100 GB |

**–°—Ç–æ–∏–º–æ—Å—Ç—å s2.small:** ~‚ÇΩ5,000/–º–µ—Å—è—Ü (–ø–æ–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≥—Ä–∞–Ω—Ç–æ–º –Ω–∞ 1 –º–µ—Å—è—Ü)

#### 2.4. –ó–æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–ó–æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏** | ru-central1-a (–ú–æ—Å–∫–≤–∞) |
| **–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø** | ‚úÖ –í–∫–ª—é—á–∏—Ç—å (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏) |

**–í–∞–∂–Ω–æ:** –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Multi-AZ (3 –∑–æ–Ω—ã), –Ω–æ —ç—Ç–æ –¥–æ—Ä–æ–∂–µ. –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º 1 –∑–æ–Ω—É.

#### 2.5. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ |
|----------|----------|-------------|
| **–ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** | `wb_reputation` | .env |
| **–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** | `admin` | .env |
| **–ü–∞—Ä–æ–ª—å** | `<–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–π>` | 1Password/Bitwarden |

**–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞—Ä–æ–ª—è:**
```bash
# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –ø–∞—Ä–æ–ª—å
openssl rand -base64 32
# –ü—Ä–∏–º–µ—Ä: kJ8mN2pQ5rT8vX3zA1bC9dE4fG6hH7iJ9kL0m
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ –ø–∞—Ä–æ–ª–µ–π –°–†–ê–ó–£!

#### 2.6. –°–µ—Ç—å

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| **–°–µ—Ç—å** | default (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é) |
| **Security group** | default (–∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å `wb-reputation-sg`) |

**Security group –ø—Ä–∞–≤–∏–ª–∞ (–µ—Å–ª–∏ —Å–æ–∑–¥–∞–µ—Ç–µ –Ω–æ–≤—É—é):**
```
–í—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫:
- Protocol: TCP
- Port: 6432 (PostgreSQL)
- Source: 0.0.0.0/0 (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–î–ª—è production:
- Source: —Ç–æ–ª—å–∫–æ IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Next.js
```

#### 2.7. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|----------|----------|-------------|
| **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ –í–∫–ª—é—á–∏—Ç—å | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ backup |
| **–í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è** | 03:00 UTC (06:00 –ú–°–ö) | –ù–æ—á—å—é, –º–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ |
| **–ü–µ—Ä–∏–æ–¥ —Ö—Ä–∞–Ω–µ–Ω–∏—è** | 7 –¥–Ω–µ–π | –î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è |
| **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** | ‚úÖ –í–∫–ª—é—á–∏—Ç—å | Yandex Cloud Monitoring |

---

### –®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä

1. –ù–∞–∂–∞—Ç—å **"–°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä"**
2. –î–æ–∂–¥–∞—Ç—å—Å—è —Å–æ–∑–¥–∞–Ω–∏—è (5-10 –º–∏–Ω—É—Ç)
3. –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å: **Running** ‚úÖ

---

### –®–∞–≥ 4: –ü–æ–ª—É—á–∏—Ç—å connection string

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞:

1. –û—Ç–∫—Ä—ã—Ç—å –∫–ª–∞—Å—Ç–µ—Ä `wb-reputation-prod-db`
2. –í–∫–ª–∞–¥–∫–∞ **"–û–±–∑–æ—Ä"**
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:
   - **–•–æ—Å—Ç (FQDN):** `c-xxxxxxxxxxxxx.rw.mdb.yandexcloud.net`
   - **–ü–æ—Ä—Ç:** `6432`

**Connection string:**
```
postgresql://admin:<PASSWORD>@c-xxxxxxxxxxxxx.rw.mdb.yandexcloud.net:6432/wb_reputation?sslmode=verify-full
```

**‚ö†Ô∏è –ó–∞–º–µ–Ω–∏—Ç–µ:**
- `<PASSWORD>` –Ω–∞ –≤–∞—à –ø–∞—Ä–æ–ª—å –∏–∑ —à–∞–≥–∞ 2.5
- `c-xxxxxxxxxxxxx` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π FQDN —Ö–æ—Å—Ç–∞

---

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

#### –í–∞—Ä–∏–∞–Ω—Ç 1: psql (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**Windows:**
```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PostgreSQL –∫–ª–∏–µ–Ω—Ç (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
# –°–∫–∞—á–∞—Ç—å: https://www.postgresql.org/download/windows/

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
psql "host=c-xxxxxxxxxxxxx.rw.mdb.yandexcloud.net port=6432 dbname=wb_reputation user=admin password=<PASSWORD> sslmode=verify-full"
```

**Mac/Linux:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å psql
brew install postgresql  # Mac
sudo apt install postgresql-client  # Ubuntu

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
psql "postgresql://admin:<PASSWORD>@c-xxxxxxxxxxxxx.rw.mdb.yandexcloud.net:6432/wb_reputation?sslmode=verify-full"
```

#### –¢–µ—Å—Ç–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:

```sql
-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é PostgreSQL
SELECT version();

-- –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
CREATE TABLE test (
  id SERIAL PRIMARY KEY,
  message TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –í—Å—Ç–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
INSERT INTO test (message) VALUES ('Hello from Yandex Cloud!');

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
SELECT * FROM test;

-- –£–¥–∞–ª–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Ç–∞–±–ª–∏—Ü—É
DROP TABLE test;

-- –û—Ç–∫–ª—é—á–∏—Ç—å—Å—è
\q
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
wb_reputation=> SELECT version();
                                                version
-------------------------------------------------------------------------------------------------------
 PostgreSQL 15.5 (Debian 15.5-1.pgdg120+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 12.2.0-14)
(1 row)
```

---

### –®–∞–≥ 6: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å credentials –≤ .env

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
# Yandex Cloud PostgreSQL (Production)
DATABASE_URL="postgresql://admin:<PASSWORD>@c-xxxxxxxxxxxxx.rw.mdb.yandexcloud.net:6432/wb_reputation?sslmode=verify-full"

# Supabase (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±—É–¥–µ—Ç –¥—Ä—É–≥–æ–π URL)
NEXT_PUBLIC_SUPABASE_URL="https://your-project.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-key"
SUPABASE_SERVICE_KEY="your-service-key"
```

**‚ö†Ô∏è –ù–ï –ö–û–ú–ú–ò–¢–ò–¢–¨ `.env.local` –≤ Git!**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ `.env.local` –µ—Å—Ç—å –≤ `.gitignore`:
```bash
echo ".env.local" >> .gitignore
```

---

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏

### –ß–µ–∫-–ª–∏—Å—Ç:

- [ ] –ö–ª–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω –∏ –≤ —Å—Ç–∞—Ç—É—Å–µ **Running**
- [ ] FQDN —Ö–æ—Å—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω
- [ ] –ü–∞—Ä–æ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ –ø–∞—Ä–æ–ª–µ–π
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `psql` —É—Å–ø–µ—à–Ω–æ
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏ —É–¥–∞–ª—è–µ—Ç—Å—è
- [ ] Latency < 100ms (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ `\timing` –≤ psql)
- [ ] `.env.local` —Å–æ–∑–¥–∞–Ω —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ credentials
- [ ] `.env.local` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ –º–æ–≥—É –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è (connection refused)

**–ü—Ä–∏—á–∏–Ω–∞:** Security group –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

**–†–µ—à–µ–Ω–∏–µ:**
1. –ó–∞–π—Ç–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä ‚Üí –í–∫–ª–∞–¥–∫–∞ "–•–æ—Å—Ç—ã"
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ **"–ü—É–±–ª–∏—á–Ω—ã–π –¥–æ—Å—Ç—É–ø"** = –î–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Security group —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –ø–æ—Ä—Ç 6432
4. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ:
   ```
   –í—Ö–æ–¥—è—â–∏–π —Ç—Ä–∞—Ñ–∏–∫:
   Protocol: TCP
   Port: 6432
   Source: 0.0.0.0/0
   ```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: SSL certificate verify failed

**–ü—Ä–∏—á–∏–Ω–∞:** Yandex Cloud –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–∫–∞—á–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç Yandex Cloud
curl -o ~/.postgresql/root.crt https://storage.yandexcloud.net/cloud-certs/CA.pem

# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å —è–≤–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
psql "host=... sslmode=verify-full sslrootcert=~/.postgresql/root.crt"
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ú–µ–¥–ª–µ–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (latency > 200ms)

**–ü—Ä–∏—á–∏–Ω–∞:** –í—ã–±—Ä–∞–Ω–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∑–æ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–∞—à—É –ª–æ–∫–∞—Ü–∏—é (–≥–¥–µ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å)
2. –í—ã–±—Ä–∞—Ç—å –±–ª–∏–∂–∞–π—à—É—é –∑–æ–Ω—É:
   - –ú–æ—Å–∫–≤–∞: `ru-central1-a`
   - –°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥: `ru-central1-b`
   - –í–ª–∞–¥–∏–º–∏—Ä: `ru-central1-c`

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (s2.small):

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–æ–∏–º–æ—Å—Ç—å/–º–µ—Å—è—Ü |
|-----------|-----------------|
| Compute (2 vCPU, 8 GB RAM) | ~‚ÇΩ3,500 |
| Storage (50 GB SSD) | ~‚ÇΩ600 |
| Backup (50 GB √ó 7 –¥–Ω–µ–π) | ~‚ÇΩ350 |
| Network (100 GB egress) | ~‚ÇΩ800 |
| **–ò–¢–û–ì–û** | **~‚ÇΩ5,250/–º–µ—Å—è—Ü** |

**–° –≥—Ä–∞–Ω—Ç–æ–º 4,000‚ÇΩ:** –ü–µ—Ä–≤—ã–π –º–µ—Å—è—Ü –ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ ‚ÇΩ1,250

### Production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–≤ –±—É–¥—É—â–µ–º):

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–æ–∏–º–æ—Å—Ç—å |
|----------|----------|-----------|
| –ö–ª–∞—Å—Å —Ö–æ—Å—Ç–∞ | s2.medium (4 vCPU, 16 GB) | ~‚ÇΩ7,000 |
| Storage | 100 GB SSD | ~‚ÇΩ1,200 |
| Multi-AZ | 3 –∑–æ–Ω—ã (–≤—ã—Å–æ–∫–∞—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å) | √ó3 = ‚ÇΩ21,000 |
| Backup | 100 GB √ó 7 –¥–Ω–µ–π | ~‚ÇΩ700 |
| Network | 500 GB | ~‚ÇΩ4,000 |
| **–ò–¢–û–ì–û** | | **~‚ÇΩ12,900/–º–µ—Å—è—Ü** |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º s2.small (1 –∑–æ–Ω–∞), –ø—Ä–∏ —Ä–æ—Å—Ç–µ –∫–ª–∏–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ Multi-AZ.

---

## üìà –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### Yandex Cloud Monitoring Dashboard:

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä ‚Üí –í–∫–ª–∞–¥–∫–∞ **"–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥"**
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏:
   - CPU usage
   - Memory usage
   - Disk IOPS
   - Network traffic
   - Active connections

### –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–ª–µ—Ä—Ç—ã:

1. Yandex Cloud Console ‚Üí "Monitoring" ‚Üí "Alerts"
2. –°–æ–∑–¥–∞—Ç—å –∞–ª–µ—Ä—Ç:
   - **Metric:** `cpu_usage`
   - **Condition:** `> 80%`
   - **Duration:** `5 minutes`
   - **Notification:** Email –Ω–∞ –≤–∞—à email

---

## ‚úÖ –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞:

**‚Üí –ü–µ—Ä–µ–π—Ç–∏ –∫ TASK-M02:** [–°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é](./supabase/migrations/README.md)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

**Yandex Cloud Support:**
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: https://cloud.yandex.ru/docs/managed-postgresql/
- Email: support@cloud.yandex.ru
- Telegram: @yandexcloud

**–í–æ–ø—Ä–æ—Å—ã –ø–æ –ø—Ä–æ–µ–∫—Ç—É:**
- GitHub Issues: —Ç–µ–≥ `infrastructure`
- Telegram: Migration Channel

---

**–°–æ–∑–¥–∞–Ω–æ:** 30 –¥–µ–∫–∞–±—Ä—è 2024
**–ê–≤—Ç–æ—Ä:** Development Team
**–°—Ç–∞—Ç—É—Å:** üìã Ready to Execute
**Estimated Time:** 30-40 –º–∏–Ω—É—Ç (–±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∞—Å—Ç–µ—Ä–∞)
